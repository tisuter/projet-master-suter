<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <title>Projet Master | Activité B</title>
    <script src="js/jspsych.js"></script>
    <script src="js/scripts.min.js"></script>
    <script src="plugins/jspsych-instructions.js"></script>
    <script src="plugins/jspsych-survey-text.js"></script>
    <script src="plugins/jspsych-audio-button-response.js"></script>
    <script src="common.js"></script>
    <link rel="stylesheet" href="css/jspsych.css">
    <link rel="stylesheet" href="css/jspsych-custom-styles.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body></body>

<script>
    // LEA start
    var einleitungfragen = {
        type: 'instructions',
        pages: ['<div class="left"><p>Verbinde deinen Kopfhörer. Du hörst nun ein Telefongespräch, in dem es um einen Schwimmkurs geht. Höre den Text und beantworte die Fragen. Bereit? Klicke auf On y va.</p></div>'],
        show_clickable_nav: true,
        allow_backward: false,
        button_label_next: 'On y va',
    };

    var quest1 = [
        {question: '1. Qui aimerait apprendre à nager ?', solution: 'le fils de M. Bernin'},
        {question: '2. Quel âge a la personne qui aimerait apprendre à nager ?', solution: '8 ans'},
        {question: '3. Combien d’enfants a M. Bernin ?', solution: '2 fils'},
        {question: '4. Combien de personnes sont dans un groupe de natation ?', solution: 'deux par bassin'},
        {question: '5. Quel est le prix pour le cours de natation en particulier ?', solution: '30 euros'},
    ];
    var quest2 = [
        {question: '6. Combien de temps dure une leçon ?', solution: '20 minutes'},
        {question: '7. Quel est le minimum de leçons que propose Mme Geoire ?', solution: '4 leçons'},
        {question: '8. Quand est-ce qu’il pourra commencer le premier cours de natation ?', solution: 'la semaine prochaine'},
    ];
    var quest3 = [
        {question: '9. Quel jour est complet ?', solution: 'jeudi'},
        {question: '10. À quelle heure aura lieu le cours de natation vendredi ?', solution: 'à 12.30 (midi et demi)'},
        {question: '11. Quand va M. Bernin payer le cours ?', solution: 'cet après-midi'},
        {question: '12. Comment s’appelle la personne qui va apprendre à nager ?', solution: 'Luca'},
    ];


    const quest1Text = quest1.map(item => {
        return "<p>" + item.question + "</p>"
    });
    const quest2Text = quest2.map(item => {
        return "<p>" + item.question + "</p>"
    });
    const quest3Text = quest3.map(item => {
        return "<p>" + item.question + "</p>"
    });

    function makeQuestion(item) {
        var pos = item.question.indexOf(".")
        var name = 'q' + item.question.substr(0, pos - 1)
        return {
            prompt: '<h1></h1><div class="left"><p>' + item.question + '</p></div>',
            columns: 20,
            required: true,
            name: +name,
            //solution: item.solution
        }
    }

    const quest1Question = quest1.map(item => {
        return makeQuestion(item);
    });
    const quest2Question = quest2.map(item => {
        return makeQuestion(item);
    });
    const quest3Question = quest3.map(item => {
        return makeQuestion(item);
    });

    var einleitungQuest1 = {
        type: 'instructions',
        pages: ['<h1>Lis les questions.</h1><div class="left">' + quest1Text.join("") + '</div>'],
        show_clickable_nav: true,
        allow_backward: false,
        button_label_next: 'On y va',
    };
    var einleitungQuest2 = {
        type: 'instructions',
        pages: ['<h1>Lis les questions.</h1><div class="left">' + quest2Text.join("") + '</div>'],
        show_clickable_nav: true,
        allow_backward: false,
        button_label_next: 'On y va',
    };
    var einleitungQuest3 = {
        type: 'instructions',
        pages: ['<h1>Lis les questions.</h1><div class="left">' + quest3Text.join("") + '</div>'],
        show_clickable_nav: true,
        allow_backward: false,
        button_label_next: 'On y va',
    };

    var audioInstructions1 = {
        timeline: [{
            type: 'audio-button-response',
            stimulus: 'sound/comprehension-orale/cours-de-natation-1.mp3',
            prompt: '<h1>Écoute.</h1>' +
                    'Merke dir die Antworten! Klicke erst auf "prochain", wenn du den Text gehört hast. Die Antworten musst du zu einem späteren Zeitpunkt eingeben.' +
                '<div class="left">' + quest1Text.join("") + '</div>',
            choices: ['prochain', 'répéter'],
            // response_allowed_while_playing: false,
        }],
        loop_function: loopFunction,
    };
    var audioInstructions2 = {
        timeline: [{
            type: 'audio-button-response',
            stimulus: 'sound/comprehension-orale/cours-de-natation-2.mp3',
            prompt: '<h1>Écoute.</h1>' +
                'Merke dir die Antworten! Klicke erst auf "prochain", wenn du den Text gehört hast. Die Antworten musst du zu einem späteren Zeitpunkt eingeben.' +
                '<div class="left">' + quest2Text.join("") + '</div>',
            choices: ['prochain', 'répéter'],
            // response_allowed_while_playing: false,
        }],
        loop_function: loopFunction,
    };

    var audioInstructions3 = {
        timeline: [{
            type: 'audio-button-response',
            stimulus: 'sound/comprehension-orale/cours-de-natation-3.mp3',
            prompt: '<h1>Écoute.</h1>' +
                'Merke dir die Antworten! Klicke erst auf "prochain", wenn du den Text gehört hast. Die Antworten musst du zu einem späteren Zeitpunkt eingeben.' +
                '<div class="left">' + quest3Text.join("") + '</div>',
            choices: ['prochain', 'répéter'],
            // response_allowed_while_playing: false,
        }],
        loop_function: loopFunction,
    };

    //<h2>Beantworte die Fragen auf Deutsch oder Französisch:</h2>

    var oralFragen1 = {
        type: 'survey-text',
        questions: quest1Question,
        button_label: 'prochain >',
    };
    var oralFragen2 = {
        type: 'survey-text',
        questions: quest2Question,
        button_label: 'prochain >',
    };
    var oralFragen3 = {
        type: 'survey-text',
        questions: quest3Question,
        button_label: 'prochain >',
    };

    // LEA ENDE
    jsPsych.init({
        //LEA START
        preload_audio: motsCiblesFilmBVar2Preload,
        timeline: [einleitung, nameklasse, einleitungfragen, einleitungQuest1, audioInstructions1, oralFragen1, einleitungQuest2, audioInstructions2, oralFragen2, einleitungQuest3, audioInstructions3, oralFragen3, schlusssatzUebung],
        //LEA ENDE
        on_finish: function () {
            jsPsych.data.displayData();
            sendData("Act_B1-Variante2", jsPsych.data.get().json(true));
        }
    });


</script>
</html>
